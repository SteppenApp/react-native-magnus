{"version":3,"names":["MentionBase","textInputHeight","isTrackingStarted","setState","onHide","props","lastKeyword","triggerCallback","val","trigger","triggerLocation","boundary","pattern","RegExp","keywordArray","match","length","updateSuggestions","state","children","onChangeText","lastChar","substr","wordBoundry","previousChar","trim","startTracking","stopTracking","identifyKeyword","m","mt","mr","mb","ml","p","pr","pt","pb","pl","borderColor","borderBottomColor","borderLeftColor","borderTopColor","borderRightColor","borderWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","borderTopWidth","rounded","roundedTop","roundedRight","roundedBottom","roundedLeft","renderItem","loading","data","rest","theme","computedStyle","getStyle","flex","list","rowData","React","cloneElement","Component","Mention","withDefaultProps","bg","horizontal","shadow","shadowColor","keyboardShouldPersistTaps","position","bottom"],"sources":["mention.component.tsx"],"sourcesContent":["import React from 'react';\n\nimport { View, FlatList, ActivityIndicator } from 'react-native';\n\nimport { MentionProps } from './mention.type';\nimport { getStyle } from './mention.style';\nimport { ThemeContext } from '../../theme';\nimport { withDefaultProps } from '../../utilities/withDefaultProps';\nimport { DefaultProps } from '../../types';\n\nclass MentionBase extends React.Component<\n  MentionProps & DefaultProps<MentionProps>\n> {\n  previousChar = ' ';\n\n  isTrackingStarted = false;\n\n  state = {\n    textInputHeight: '',\n    isTrackingStarted: false,\n  };\n\n  startTracking = () => {\n    this.isTrackingStarted = true;\n    this.setState({\n      isTrackingStarted: true,\n    });\n  };\n\n  stopTracking = () => {\n    const { onHide } = this.props;\n\n    this.isTrackingStarted = false;\n    this.setState({\n      isTrackingStarted: false,\n    });\n\n    if (onHide) {\n      onHide();\n    }\n  };\n\n  updateSuggestions = (lastKeyword: string) => {\n    const { triggerCallback } = this.props;\n\n    triggerCallback(lastKeyword);\n  };\n\n  identifyKeyword = (val: string) => {\n    const { trigger, triggerLocation } = this.props;\n\n    if (this.isTrackingStarted) {\n      const boundary = triggerLocation === 'new-word-only' ? 'B' : '';\n      const pattern = new RegExp(\n        `\\\\${boundary}${trigger}[a-z0-9_-]+|\\\\${boundary}${trigger}`,\n        'gi'\n      );\n      const keywordArray = val.match(pattern);\n      if (keywordArray && !!keywordArray.length) {\n        const lastKeyword = keywordArray[keywordArray.length - 1];\n\n        this.updateSuggestions(lastKeyword);\n      }\n    }\n  };\n\n  /**\n   * on change text\n   */\n  onChangeText = (val: string) => {\n    const { isTrackingStarted } = this.state;\n    const { children, triggerLocation, trigger } = this.props;\n\n    if (children.props.onChangeText) {\n      children.props.onChangeText(val);\n    }\n\n    const lastChar = val.substr(val.length - 1);\n    const wordBoundry =\n      triggerLocation === 'new-word-only'\n        ? this.previousChar.trim().length === 0\n        : true;\n    if (lastChar === trigger && wordBoundry) {\n      this.startTracking();\n    } else if ((lastChar === ' ' && isTrackingStarted) || val === '') {\n      this.stopTracking();\n    }\n    this.previousChar = lastChar;\n    this.identifyKeyword(val);\n  };\n\n  resetTextbox = () => {\n    this.previousChar = ' ';\n    this.stopTracking();\n  };\n\n  render() {\n    const { isTrackingStarted } = this.state;\n\n    const {\n      m,\n      mt,\n      mr,\n      mb,\n      ml,\n      p,\n      pr,\n      pt,\n      pb,\n      pl,\n      borderColor,\n      borderBottomColor,\n      borderLeftColor,\n      borderTopColor,\n      borderRightColor,\n      borderWidth,\n      borderLeftWidth,\n      borderRightWidth,\n      borderBottomWidth,\n      borderTopWidth,\n      rounded,\n      roundedTop,\n      roundedRight,\n      roundedBottom,\n      roundedLeft,\n      children,\n      renderItem,\n      loading,\n      data,\n      ...rest\n    } = this.props;\n\n    return (\n      <ThemeContext.Consumer>\n        {({ theme }) => {\n          const computedStyle = getStyle(theme, this.props);\n\n          return (\n            <View style={{ flex: 1 }}>\n              <>\n                {(data ?? []).length > 0 &&\n                  isTrackingStarted &&\n                  loading === false && (\n                    <FlatList\n                      data={data}\n                      showsVerticalScrollIndicator\n                      style={computedStyle.list}\n                      {...rest}\n                      renderItem={(rowData) => renderItem(rowData)}\n                    />\n                  )}\n                {loading && (\n                  <View style={computedStyle.loading}>\n                    <ActivityIndicator />\n                  </View>\n                )}\n              </>\n\n              <View>\n                {React.cloneElement(children, {\n                  onChangeText: this.onChangeText,\n                })}\n              </View>\n            </View>\n          );\n        }}\n      </ThemeContext.Consumer>\n    );\n  }\n}\n\nconst Mention = withDefaultProps(MentionBase, 'Mention', {\n  bg: 'white',\n  rounded: 'md',\n  borderColor: 'gray200',\n  borderWidth: 1,\n  horizontal: false,\n  loading: false,\n  shadow: 1,\n  shadowColor: 'gray900',\n  keyboardShouldPersistTaps: 'always',\n  trigger: '@',\n  position: 'absolute',\n  bottom: 0,\n  onHide: () => {},\n});\n\nexport { Mention };\n"],"mappings":"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"}