{"version":3,"names":["keyGenerator","Math","random","toString","substr","useKey","usedKeys","React","useRef","generateKey","foundUniqueKey","newKey","tries","current","includes","Date","now","floor","push","removeKey","key","filter","k"],"sources":["useKey.ts"],"sourcesContent":["import * as React from 'react';\n\ninterface IUseKey {\n  generateKey(): string;\n  removeKey(key: string): void;\n}\n\n// Generates a random key\nconst keyGenerator = (): string => {\n  return `portalize_${Math.random().toString(36).substr(2, 16)}-${Math.random()\n    .toString(36)\n    .substr(2, 16)}-${Math.random().toString(36).substr(2, 16)}`;\n};\n\n// Custom hook that checks for uniqueness and retries if clashes\nexport const useKey = (): IUseKey => {\n  const usedKeys = React.useRef<Array<string>>([]);\n\n  const generateKey = (): string => {\n    let foundUniqueKey = false;\n    let newKey = '';\n    let tries = 0;\n\n    while (!foundUniqueKey && tries < 3) {\n      // limit number of tries to stop endless loop of pain\n      tries++;\n      newKey = keyGenerator();\n\n      if (!usedKeys.current.includes(newKey)) {\n        foundUniqueKey = true;\n      }\n    }\n\n    // will only run if exited while loop without finding a unique key\n    if (!foundUniqueKey) {\n      newKey = `portalize_${Date.now()}_${Math.floor(Math.random() * 1000)}`; // fallback method\n    }\n\n    usedKeys.current.push(newKey);\n    return newKey;\n  };\n\n  // Removes our key to make it 'available' again\n  const removeKey = (key: string): void => {\n    usedKeys.current = usedKeys.current.filter((k) => k !== key);\n  };\n\n  return { generateKey, removeKey };\n};\n"],"mappings":"+EAAA,oD,0/BAQA,GAAMA,aAAY,CAAG,QAAfA,aAAe,EAAc,CACjC,mBAAoBC,IAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2BC,MAA3B,CAAkC,CAAlC,CAAqC,EAArC,CAApB,KAAgEH,IAAI,CAACC,MAAL,GAC7DC,QAD6D,CACpD,EADoD,EAE7DC,MAF6D,CAEtD,CAFsD,CAEnD,EAFmD,CAAhE,KAEoBH,IAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2BC,MAA3B,CAAkC,CAAlC,CAAqC,EAArC,CAFpB,CAGD,CAJD,CAOO,GAAMC,OAAM,CAAG,QAATA,OAAS,EAAe,CACnC,GAAMC,SAAQ,CAAGC,KAAK,CAACC,MAAN,CAA4B,EAA5B,CAAjB,CAEA,GAAMC,YAAW,CAAG,QAAdA,YAAc,EAAc,CAChC,GAAIC,eAAc,CAAG,KAArB,CACA,GAAIC,OAAM,CAAG,EAAb,CACA,GAAIC,MAAK,CAAG,CAAZ,CAEA,MAAO,CAACF,cAAD,EAAmBE,KAAK,CAAG,CAAlC,CAAqC,CAEnCA,KAAK,GACLD,MAAM,CAAGX,YAAY,EAArB,CAEA,GAAI,CAACM,QAAQ,CAACO,OAAT,CAAiBC,QAAjB,CAA0BH,MAA1B,CAAL,CAAwC,CACtCD,cAAc,CAAG,IAAjB,CACD,CACF,CAGD,GAAI,CAACA,cAAL,CAAqB,CACnBC,MAAM,cAAgBI,IAAI,CAACC,GAAL,EAAhB,KAA8Bf,IAAI,CAACgB,KAAL,CAAWhB,IAAI,CAACC,MAAL,GAAgB,IAA3B,CAApC,CACD,CAEDI,QAAQ,CAACO,OAAT,CAAiBK,IAAjB,CAAsBP,MAAtB,EACA,MAAOA,OAAP,CACD,CAtBD,CAyBA,GAAMQ,UAAS,CAAG,QAAZA,UAAY,CAACC,GAAD,CAAuB,CACvCd,QAAQ,CAACO,OAAT,CAAmBP,QAAQ,CAACO,OAAT,CAAiBQ,MAAjB,CAAwB,SAACC,CAAD,QAAOA,EAAC,GAAKF,GAAb,EAAxB,CAAnB,CACD,CAFD,CAIA,MAAO,CAAEX,WAAW,CAAXA,WAAF,CAAeU,SAAS,CAATA,SAAf,CAAP,CACD,CAjCM,C"}