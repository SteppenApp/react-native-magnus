{"version":3,"names":["Carousel","incomingProps","props","useDefaultProps","showIndicators","children","renderIndicators","React","useState","selectedPage","setSelectedPage","totalPages","setTotalPages","totalContentWidth","setTotalContentWidth","items","useMemo","Children","map","child","isValidElement","type","CarouselItem","console","warn","init","width","totalItems","length","getPage","event","widthOffset","nativeEvent","contentOffset","x","widthOfEachItem","page","internal_renderIndicators","Array","fill","_","index","flex","w","_h","data","contentSize","Item"],"sources":["carousel.component.tsx"],"sourcesContent":["import React from 'react';\nimport { NativeScrollEvent, NativeSyntheticEvent } from 'react-native';\nimport { useDefaultProps } from '../../utilities/useDefaultProps';\nimport { Div } from '../div/div.component';\nimport { ScrollDiv } from '../scrolldiv/scrolldiv.component';\n\nimport { CarouselProps, CompoundedCarousel } from './carousel.type';\nimport CarouselItem from './item.carousel';\n\nconst Carousel: CompoundedCarousel<CarouselProps> = (incomingProps) => {\n  const props = useDefaultProps('Carousel', incomingProps, {\n    showIndicators: true,\n  });\n\n  const { children, renderIndicators, showIndicators } = props;\n  const [selectedPage, setSelectedPage] = React.useState(1);\n  const [totalPages, setTotalPages] = React.useState(1);\n  const [totalContentWidth, setTotalContentWidth] = React.useState(0);\n\n  const items: JSX.Element[] = React.useMemo(() => {\n    return (\n      React.Children.map(children, (child) => {\n        if (!React.isValidElement(child)) {\n          return;\n        }\n\n        if (child.type === CarouselItem) {\n          return child;\n        }\n\n        console.warn(\n          'Only children of type Carousel.Item are allowed here. Any other child components will be ignored.'\n        );\n        return null;\n      }) ?? []\n    );\n  }, [children]);\n\n  const init = (width: number) => {\n    // initialize width\n    setTotalContentWidth(width);\n    // initialize total pages\n    const totalItems = items.length;\n    setTotalPages(totalItems);\n  };\n\n  const getPage = (event: NativeSyntheticEvent<NativeScrollEvent>) => {\n    const widthOffset = event.nativeEvent.contentOffset.x;\n\n    const widthOfEachItem = totalContentWidth / totalPages;\n    // const pageWidth = widthOfEachItem * itemsPerPage;\n\n    for (let page = 1; page <= totalPages; page++) {\n      if (widthOffset + 1 < widthOfEachItem * page) {\n        return page;\n      }\n\n      if (page === totalPages) {\n        return page;\n      }\n    }\n\n    return 0;\n  };\n\n  const internal_renderIndicators = () => {\n    if (renderIndicators) {\n      return renderIndicators({ selectedPage, totalPages });\n    }\n\n    return (\n      <Div flexDir=\"row\" justifyContent=\"center\" my=\"lg\">\n        {Array(totalPages)\n          .fill(0)\n          .map((_, index) => {\n            return (\n              <Div\n                w={10}\n                h={10}\n                rounded=\"circle\"\n                bg={selectedPage === index + 1 ? 'blue600' : 'gray400'}\n                mx=\"xs\"\n                key={index}\n              />\n            );\n          })}\n      </Div>\n    );\n  };\n\n  return (\n    <>\n      <ScrollDiv\n        {...props}\n        horizontal={true}\n        contentContainerStyle={{\n          width: `${100 * totalPages}%`,\n          flex: 1,\n        }}\n        showsHorizontalScrollIndicator={false}\n        onContentSizeChange={(w, _h) => init(w)}\n        onScroll={(data) => {\n          setTotalContentWidth(data.nativeEvent.contentSize.width);\n          setSelectedPage(getPage(data));\n        }}\n        scrollEventThrottle={200}\n        pagingEnabled\n        decelerationRate=\"fast\"\n      >\n        {items?.map((child, index) => (\n          <Div flex={1} key={index}>\n            {child}\n          </Div>\n        ))}\n      </ScrollDiv>\n\n      {showIndicators && internal_renderIndicators()}\n    </>\n  );\n};\n\nCarousel.Item = CarouselItem;\n\nexport { Carousel };\n"],"mappings":"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"}